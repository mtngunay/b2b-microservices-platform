# Secrets for B2B Platform
# Requirements: 3.5, 8.3 - THE Orchestrator SHALL implement Secrets for sensitive data management
# NOTE: In production, use external secret management (Azure Key Vault, AWS Secrets Manager, HashiCorp Vault)
# These are base64 encoded placeholder values - replace with actual secrets in production

apiVersion: v1
kind: Secret
metadata:
  name: b2b-secrets
  namespace: b2b-system
  labels:
    app.kubernetes.io/name: b2b-platform
    app.kubernetes.io/component: secrets
type: Opaque
data:
  # Connection Strings (base64 encoded)
  # Actual value: Server=mssql-svc.b2b-data.svc.cluster.local;Database=B2BWriteDb;User Id=sa;Password=YourStrong@Passw0rd;TrustServerCertificate=True
  WriteDatabase__ConnectionString: U2VydmVyPW1zc3FsLXN2Yy5iMmItZGF0YS5zdmMuY2x1c3Rlci5sb2NhbDtEYXRhYmFzZT1CMkJXcml0ZURiO1VzZXIgSWQ9c2E7UGFzc3dvcmQ9WW91clN0cm9uZ0BQYXNzdzByZDtUcnVzdFNlcnZlckNlcnRpZmljYXRlPVRydWU=
  
  # Actual value: mongodb://admin:YourMongoPassword@mongodb-svc.b2b-data.svc.cluster.local:27017/?authSource=admin
  ReadDatabase__ConnectionString: bW9uZ29kYjovL2FkbWluOllvdXJNb25nb1Bhc3N3b3JkQG1vbmdvZGItc3ZjLmIyYi1kYXRhLnN2Yy5jbHVzdGVyLmxvY2FsOjI3MDE3Lz9hdXRoU291cmNlPWFkbWlu
  
  # Actual value: redis-svc.b2b-data.svc.cluster.local:6379,password=YourRedisPassword,abortConnect=false
  Redis__ConnectionString: cmVkaXMtc3ZjLmIyYi1kYXRhLnN2Yy5jbHVzdGVyLmxvY2FsOjYzNzkscGFzc3dvcmQ9WW91clJlZGlzUGFzc3dvcmQsYWJvcnRDb25uZWN0PWZhbHNl
  
  # Actual value: amqp://b2b_user:YourRabbitPassword@rabbitmq-svc.b2b-messaging.svc.cluster.local:5672/
  RabbitMQ__ConnectionString: YW1xcDovL2IyYl91c2VyOllvdXJSYWJiaXRQYXNzd29yZEByYWJiaXRtcS1zdmMuYjJiLW1lc3NhZ2luZy5zdmMuY2x1c3Rlci5sb2NhbDo1NjcyLw==
  
  # JWT Secret Key (256-bit key for HS256)
  # Actual value: YourSuperSecretJwtKeyThatIsAtLeast32CharactersLong!
  Jwt__SecretKey: WW91clN1cGVyU2VjcmV0Snd0S2V5VGhhdElzQXRMZWFzdDMyQ2hhcmFjdGVyc0xvbmch

---
# Database Secrets
apiVersion: v1
kind: Secret
metadata:
  name: mssql-secrets
  namespace: b2b-data
  labels:
    app.kubernetes.io/name: mssql
    app.kubernetes.io/component: database
type: Opaque
data:
  # Actual value: YourStrong@Passw0rd
  SA_PASSWORD: WW91clN0cm9uZ0BQYXNzdzByZA==

---
# MongoDB Secrets
apiVersion: v1
kind: Secret
metadata:
  name: mongodb-secrets
  namespace: b2b-data
  labels:
    app.kubernetes.io/name: mongodb
    app.kubernetes.io/component: database
type: Opaque
data:
  # Actual value: admin
  MONGO_INITDB_ROOT_USERNAME: YWRtaW4=
  # Actual value: YourMongoPassword
  MONGO_INITDB_ROOT_PASSWORD: WW91ck1vbmdvUGFzc3dvcmQ=

---
# Redis Secrets
apiVersion: v1
kind: Secret
metadata:
  name: redis-secrets
  namespace: b2b-data
  labels:
    app.kubernetes.io/name: redis
    app.kubernetes.io/component: cache
type: Opaque
data:
  # Actual value: YourRedisPassword
  REDIS_PASSWORD: WW91clJlZGlzUGFzc3dvcmQ=

---
# RabbitMQ Secrets
apiVersion: v1
kind: Secret
metadata:
  name: rabbitmq-secrets
  namespace: b2b-messaging
  labels:
    app.kubernetes.io/name: rabbitmq
    app.kubernetes.io/component: messaging
type: Opaque
data:
  # Actual value: b2b_user
  RABBITMQ_DEFAULT_USER: YjJiX3VzZXI=
  # Actual value: YourRabbitPassword
  RABBITMQ_DEFAULT_PASS: WW91clJhYmJpdFBhc3N3b3Jk
  # Erlang cookie for cluster communication
  # Actual value: B2B_ERLANG_COOKIE_SECRET
  RABBITMQ_ERLANG_COOKIE: QjJCX0VSTEFOR19DT09LSUVfU0VDUkVU
